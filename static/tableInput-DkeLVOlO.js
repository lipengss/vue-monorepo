import{d as P,y as N,a1 as F,o as f,l as C,z as n,a as M,f as a,u as e,E as g,A as k,B as Q,C as b,U as x,S as v,R as A,V as z,c as E,F as I,a2 as j,a3 as w,aQ as Y,ah as J,Q as L,M as O,am as B,al as V,J as $,aR as q,aS as S,W,r as T,aT as G,aU as H,aV as R,_ as K}from"./index-D9Dc_mid.js";import{E as D,D as X}from"./index-CAEJHQWI.js";import{_ as Z}from"./IconSelect.vue_vue_type_style_index_0_lang-DCf-64ik.js";import{n as ee}from"./index.browser-vcSNLBTf.js";import"./lodash-D6lYsKd-.js";import"./FileSaver.min-B5S8c-r5.js";import"./numeral-rhsuslGW.js";function le(u){function p(){const r=u.data;!r.options&&(r.options=[]),r.options.push({label:"",value:""})}function t(r){const h=u.data;!h.options&&(h.options=[]),h.options.splice(r+1,0,{label:"",value:""})}function c(r){u.data.expand.options.splice(r,1)}function y(r){r?u.data.defaultValue=r.value:(u.data.defaultValue="",delete u.data.defaultValue)}return[p,t,c,y]}function ae(u){function p(t=[]){return typeof t=="string"?t===u.data.type:t.includes(u.data.type)}return[p]}function ne(u){function p(t){u.visible=!0,u.data=t}return{operation:p}}const te={key:0},oe={key:1},de={class:"dialog-footer"},ue=P({__name:"inputOperation",setup(u,{expose:p}){const t=N({visible:!1,data:{label:"",field:"",type:D.input,id:"",parent:"",required:!1,expand:{}}}),[c,y,r,h]=le(t),[i]=ae(t);return p(ne(t)),(s,d)=>{const _=F("warning");return f(),C(e(W),{modelValue:t.visible,"onUpdate:modelValue":d[7]||(d[7]=l=>t.visible=l),title:t.data.label},{footer:n(()=>[M("span",de,[a(e(g),{onClick:d[5]||(d[5]=l=>t.visible=!1)},{default:n(()=>[k("取消")]),_:1}),a(e(g),{type:"primary",onClick:d[6]||(d[6]=l=>t.visible=!1)},{default:n(()=>[k(" 保存 ")]),_:1})])]),default:n(()=>[a(e(Q),{model:t.data,"label-position":"top"},{default:n(()=>[e(i)(["checkbox","radio","switch"])?v("",!0):(f(),C(e(b),{key:0,label:"清空按钮",prop:"clearable"},{default:n(()=>[a(e(x),{modelValue:t.data.expand.clearable,"onUpdate:modelValue":d[0]||(d[0]=l=>t.data.expand.clearable=l)},null,8,["modelValue"])]),_:1})),a(e(b),{label:"禁启用",prop:"disabled"},{default:n(()=>[a(e(x),{modelValue:t.data.expand.disabled,"onUpdate:modelValue":d[1]||(d[1]=l=>t.data.expand.disabled=l)},null,8,["modelValue"])]),_:1}),e(i)("select")?(f(),C(e(b),{key:1,label:"是否多选",prop:"multiple"},{default:n(()=>[a(e(x),{modelValue:t.data.expand.multiple,"onUpdate:modelValue":d[2]||(d[2]=l=>t.data.expand.multiple=l)},null,8,["modelValue"])]),_:1})):v("",!0),e(i)(["checkbox","radio","switch"])?v("",!0):(f(),C(e(b),{key:2,label:"表单头部图标",prop:"readonly"},{default:n(()=>[a(Z,{value:t.data.expand.prefix,"onUpdate:value":d[3]||(d[3]=l=>t.data.expand.prefix=l)},null,8,["value"])]),_:1})),e(i)(["datePicker"])?(f(),C(e(b),{key:3,label:"年/月/周/日",prop:"readonly"},{default:n(()=>[a(e(A),null,{default:n(()=>[a(e(z),{modelValue:t.data.expand.type,"onUpdate:modelValue":d[4]||(d[4]=l=>t.data.expand.type=l)},{default:n(()=>[(f(!0),E(I,null,j(e(X),l=>(f(),C(e(w),{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(e(Y),{placement:"top",title:"提示",width:200,trigger:"hover",content:"日期筛选以/年/月/周/日为单位的展示效果进行筛选"},{reference:n(()=>[a(e(J),null,{default:n(()=>[a(_)]),_:1})]),_:1})]),_:1})]),_:1})):v("",!0),e(i)(["checkbox","radio","select"])?(f(),C(e(b),{key:4,label:"枚举类型"},{default:n(()=>[a(e(L),{type:"warning","show-icon":""},{title:n(()=>[t.data.defaultValue?(f(),E("span",te," 当前选中的默认值为："+O(t.data.defaultValue),1)):(f(),E("span",oe," 单击表表格可选中枚举的默认显示值 "))]),_:1}),a(e(B),{size:"small",class:"mb14",border:"",data:t.data.options,"highlight-current-row":"",onCurrentChange:e(h)},{default:n(()=>[a(e(V),{type:"index",label:"序号",width:"50",align:"center"}),a(e(V),{prop:"value",label:"值",align:"center"},{default:n(({row:l,$index:o})=>[a(e(b),{prop:`options[${o}].value`,rules:{required:!0}},{default:n(()=>[a(e($),{modelValue:l.value,"onUpdate:modelValue":m=>l.value=m,placeholder:"输入表单名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),a(e(V),{prop:"label",label:"文本",align:"center"},{default:n(({row:l,$index:o})=>[a(e(b),{prop:`options[${o}].label`,rules:{required:!0,message:"请输入表单名称"}},{default:n(()=>[a(e($),{modelValue:l.label,"onUpdate:modelValue":m=>l.label=m,placeholder:"输入表单名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:1}),a(e(V),{prop:"required",label:"操作",align:"center"},{default:n(({row:l,$index:o})=>[a(e(A),null,{default:n(()=>[a(e(g),{type:"success",size:"small",onClick:m=>e(y)(o),circle:"",icon:e(q),title:"添加相邻元素"},null,8,["onClick","icon"]),a(e(g),{type:"danger",size:"small",onClick:m=>e(r)(o),circle:"",icon:e(S)},null,8,["onClick","icon"])]),_:2},1024)]),_:1})]),_:1},8,["data","onCurrentChange"]),a(e(g),{type:"success",class:"w100",icon:e(q),onClick:e(c)},{default:n(()=>[k("添加表单")]),_:1},8,["icon","onClick"])]),_:1})):v("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}});function ie(){function u(t,c){c.defaultValue=t==="object"?{}:""}function p(t,c){const y=["select","checkbox"].includes(c.type)?"请选择":"请输入"+c.label;t?c.rules={message:y,required:t}:delete c.rules}return[u,p]}function se(u,p){function t(i,s){if(i==="adjoin"){p.value="add";const d=U();d.parent=`${s.parent}|${d.id}`;const _=s.parent.split("|");if(_.length===1){const l=u.findIndex(o=>o.id===s.id);u.splice(l+1,0,d)}else{const l=_.pop();l&&h(_,l,u)}}else{const d=U();d.parent=`${s.parent}|${d.id}`,s.children&&Array.isArray(s.children)||(s.children=[]),s.children.push(d)}}function c(){const i=U();i.parent=i.id,u.push(i)}function y(i){p.value="delete";const s=i.parent.split("|");if(s.length===1){const d=u.findIndex(_=>_.id===s[0]);d!==-1&&u.splice(d,1)}else{const d=s.pop();d&&r(s,d,u)}}return[t,c,y];function r(i,s,d){i.forEach(_=>{const l=d.find(o=>o.id===_);if(l&&Array.isArray(l.children)){const o=l.children.findIndex(m=>m.id===s);o!==-1?l.children.splice(o,1):(i.unshift(),r(i,s,l.children))}})}function h(i,s,d){i.forEach(_=>{const l=d.find(o=>o.id===_);if(l&&Array.isArray(l.children)){const o=l.children.findIndex(m=>m.id===s);if(o!==-1){const m=U();m.parent=`${l.parent}|${m.id}`,l.children.splice(o+1,0,m)}else i.unshift(),h(i,s,l.children)}})}}function U(){const u=ee();return{label:"",field:"",type:D.input,id:u,parent:"",show:!0,expand:{clearable:!0},required:!1}}const re=P({__name:"tableInput",props:{datas:{default:Array}},setup(u){const p=u,t=T(),c=T("add"),[y,r]=ie(),[h,i,s]=se(p.datas,c);return(d,_)=>(f(),E(I,null,[a(e(B),{size:"small",class:"mb18",border:"",data:d.datas,"row-key":"id"},{default:n(()=>[a(e(V),{prop:"label",label:"表单名称"},{default:n(({row:l})=>[a(e(b),{rules:{required:!0,message:"请输入表单名称"}},{default:n(()=>[a(e($),{modelValue:l.label,"onUpdate:modelValue":o=>l.label=o,placeholder:"输入表单名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1}),a(e(V),{prop:"field",label:"表单字段"},{default:n(({row:l})=>[a(e(b),{rules:{required:!0}},{default:n(()=>[a(e($),{modelValue:l.field,"onUpdate:modelValue":o=>l.field=o,placeholder:"输入表单字段名"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1}),a(e(V),{prop:"type",label:"表单类型",width:"297"},{default:n(({row:l})=>[a(e(b),{rules:{required:!0}},{default:n(()=>[a(e(z),{modelValue:l.type,"onUpdate:modelValue":o=>l.type=o,onChange:o=>e(y)(o,l)},{default:n(()=>[(f(!0),E(I,null,j(e(D),o=>(f(),C(e(w),{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),a(e(g),{class:"ml6",disabled:l.type==="object",onClick:o=>t.value.operation(l)},{default:n(()=>[k("更多")]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:1}),a(e(V),{prop:"required",label:"是否必填",align:"center"},{default:n(({row:l})=>[a(e(b),null,{default:n(()=>[a(e(x),{modelValue:l.required,"onUpdate:modelValue":o=>l.required=o,onChange:o=>e(r)(o,l),disabled:["object","radio","switch"].includes(l.type)},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"])]),_:2},1024)]),_:1}),a(e(V),{prop:"show",label:"显示",align:"center"},{default:n(({row:l})=>[a(e(b),null,{default:n(()=>[a(e(x),{modelValue:l.show,"onUpdate:modelValue":o=>l.show=o},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1}),a(e(V),{label:"操作",align:"center"},{default:n(({row:l})=>[a(e(A),null,{default:n(()=>[a(e(G),{placement:"bottom-start",onCommand:o=>e(h)(o,l)},{dropdown:n(()=>[a(e(H),null,{default:n(()=>[a(e(R),{command:"adjoin"},{default:n(()=>[k("添加相邻节点")]),_:1}),["object","array"].includes(l.type)?(f(),C(e(R),{key:0,command:"children"},{default:n(()=>[k("添加子节点")]),_:1})):v("",!0)]),_:2},1024)]),default:n(()=>[a(e(g),{type:"success",size:"small",circle:"",icon:e(q)},null,8,["icon"])]),_:2},1032,["onCommand"]),a(e(g),{type:"danger",size:"small",onClick:o=>e(s)(l),circle:"",icon:e(S)},null,8,["onClick","icon"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),a(e(g),{type:"success",class:"w100",icon:e(q),onClick:e(i)},{default:n(()=>[k("添加表单")]),_:1},8,["icon","onClick"]),a(ue,{ref_key:"operationRef",ref:t},null,512)],64))}}),Ve=K(re,[["__scopeId","data-v-0c18d40a"]]);export{Ve as default};
